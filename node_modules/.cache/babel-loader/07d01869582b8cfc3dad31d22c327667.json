{"ast":null,"code":"import \"core-js/modules/es.array.slice.js\";\n// import store from '@/store';\nimport axios from 'axios';\nimport router from '../router';\nimport { useUserStore } from '@/stores/user';\nimport { useViewStore } from '@/stores/view';\nexport default function useAxios() {\n  function postData(url, payload) {\n    var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n    var failCallback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n    var user = useUserStore();\n    var viewStore = useViewStore();\n    viewStore.setLoading(true);\n    axios.post(url, payload, {\n      headers: {\n        authorization: user.userInfo.access_token\n      }\n    }).then(function (res) {\n      viewStore.setLoading(false);\n      if (res.data.success) {\n        if (callback) {\n          callback(res.data);\n        }\n      } else {\n        // post에 대한 응답으로 success가 false일 경우 실행할 로직(서버와 통신은 성공한 상태)\n        if (failCallback) {\n          failCallback(res.data);\n        }\n      }\n    })\n    // 서버와 통신자체가 실패한 상태\n    [\"catch\"](function (error) {\n      viewStore.setLoading(false);\n      //http 에러 시 열려있는 모든 모달 닫기\n      // store.commit('modal/closeModalAll');\n      console.error(error);\n    });\n  }\n  function fetchData(url) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n    var failCallback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n    var user = useUserStore();\n    var viewStore = useViewStore();\n    viewStore.setLoading(true);\n    axios.get(url, {\n      headers: {\n        authorization: user.userInfo.access_token\n      },\n      params: params\n    }).then(function (res) {\n      var _res$data;\n      viewStore.setLoading(false);\n      if ((_res$data = res.data) !== null && _res$data !== void 0 && _res$data.success) {\n        callback(res.data);\n      } else {\n        if (failCallback) {\n          failCallback(res.data);\n        }\n      }\n    })[\"catch\"](function (error) {\n      console.log(error);\n      viewStore.setLoading(false);\n      //http 에러 시 열려있는 모든 모달 닫기\n      // store.commit('modal/closeModalAll');\n      var status = error === null || error === void 0 ? void 0 : error.message.slice(-3);\n      if (status === '500') {\n        router.push('/404');\n      } else {\n        if (status === '429') {\n          router.push('/');\n        } else {\n          router.push('/');\n        }\n      }\n    });\n  }\n  return {\n    postData: postData,\n    fetchData: fetchData\n  };\n}","map":{"version":3,"names":["axios","router","useUserStore","useViewStore","useAxios","postData","url","payload","callback","arguments","length","undefined","failCallback","user","viewStore","setLoading","post","headers","authorization","userInfo","access_token","then","res","data","success","error","console","fetchData","params","get","_res$data","log","status","message","slice","push"],"sources":["/Users/hwangjihwan/Documents/GitHub/MyPortfolio/src/composables/useAxios.js"],"sourcesContent":["// import store from '@/store';\nimport axios from 'axios';\nimport router from '../router';\nimport { useUserStore } from '@/stores/user';\nimport { useViewStore } from '@/stores/view';\n\nexport default function useAxios() {\n\tfunction postData(url, payload, callback = () => {}, failCallback = () => {}) {\n\t\tconst user = useUserStore();\n\t\tconst viewStore = useViewStore();\n\t\tviewStore.setLoading(true);\n\t\taxios\n\t\t\t.post(url, payload, {\n\t\t\t\theaders: {\n\t\t\t\t\tauthorization: user.userInfo.access_token,\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tviewStore.setLoading(false);\n\t\t\t\tif (res.data.success) {\n\t\t\t\t\tif (callback) {\n\t\t\t\t\t\tcallback(res.data);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// post에 대한 응답으로 success가 false일 경우 실행할 로직(서버와 통신은 성공한 상태)\n\t\t\t\t\tif (failCallback) {\n\t\t\t\t\t\tfailCallback(res.data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 서버와 통신자체가 실패한 상태\n\t\t\t.catch((error) => {\n\t\t\t\tviewStore.setLoading(false);\n\t\t\t\t//http 에러 시 열려있는 모든 모달 닫기\n\t\t\t\t// store.commit('modal/closeModalAll');\n\t\t\t\tconsole.error(error);\n\t\t\t});\n\t}\n\n\tfunction fetchData(url, params = {}, callback = () => {}, failCallback = () => {}) {\n\t\tconst user = useUserStore();\n\t\tconst viewStore = useViewStore();\n\t\tviewStore.setLoading(true);\n\t\taxios\n\t\t\t.get(url, {\n\t\t\t\theaders: {\n\t\t\t\t\tauthorization: user.userInfo.access_token,\n\t\t\t\t},\n\t\t\t\tparams: params,\n\t\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tviewStore.setLoading(false);\n\t\t\t\tif (res.data?.success) {\n\t\t\t\t\tcallback(res.data);\n\t\t\t\t} else {\n\t\t\t\t\tif (failCallback) {\n\t\t\t\t\t\tfailCallback(res.data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.log(error);\n\t\t\t\tviewStore.setLoading(false);\n\t\t\t\t//http 에러 시 열려있는 모든 모달 닫기\n\t\t\t\t// store.commit('modal/closeModalAll');\n\t\t\t\tconst status = error?.message.slice(-3);\n\t\t\t\tif (status === '500') {\n\t\t\t\t\trouter.push('/404');\n\t\t\t\t} else {\n\t\t\t\t\tif (status === '429') {\n\t\t\t\t\t\trouter.push('/');\n\t\t\t\t\t} else {\n\t\t\t\t\t\trouter.push('/');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\treturn {\n\t\tpostData,\n\t\tfetchData,\n\t};\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}